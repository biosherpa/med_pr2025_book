<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Práctica 3. Introducción y manipulación de datos en R (2)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Práctica 2.2_files/libs/clipboard/clipboard.min.js"></script>
<script src="Práctica 2.2_files/libs/quarto-html/quarto.js"></script>
<script src="Práctica 2.2_files/libs/quarto-html/popper.min.js"></script>
<script src="Práctica 2.2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Práctica 2.2_files/libs/quarto-html/anchor.min.js"></script>
<link href="Práctica 2.2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Práctica 2.2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Práctica 2.2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Práctica 2.2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Práctica 2.2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contenidos</h2>
   
  <ul>
  <li><a href="#data-frame" id="toc-data-frame" class="nav-link active" data-scroll-target="#data-frame">1. Data frame</a>
  <ul class="collapse">
  <li><a href="#creación-de-un-dataframe." id="toc-creación-de-un-dataframe." class="nav-link" data-scroll-target="#creación-de-un-dataframe.">1.1. Creación de un dataframe.</a></li>
  <li><a href="#importación-de-un-dataframe" id="toc-importación-de-un-dataframe" class="nav-link" data-scroll-target="#importación-de-un-dataframe">1.2 Importación de un dataframe</a></li>
  <li><a href="#operando-con-un-dataframe" id="toc-operando-con-un-dataframe" class="nav-link" data-scroll-target="#operando-con-un-dataframe">1.3 Operando con un dataframe</a></li>
  </ul></li>
  <li><a href="#array" id="toc-array" class="nav-link" data-scroll-target="#array">2. Array</a></li>
  <li><a href="#lista" id="toc-lista" class="nav-link" data-scroll-target="#lista">3. Lista</a></li>
  <li><a href="#ejercicios-con-un-dataframe" id="toc-ejercicios-con-un-dataframe" class="nav-link" data-scroll-target="#ejercicios-con-un-dataframe"><strong>4. Ejercicios con un dataframe</strong></a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span style="font-size:40px; font-weight:bold;">Práctica 3. Introducción y manipulación de datos en R (2)</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="data-frame" class="level2">
<h2 class="anchored" data-anchor-id="data-frame">1. Data frame</h2>
<p>Un <strong>data frame</strong> en R es una estructura de datos bidimensional que, a primera vista, se parece a una matriz, pero es más versátil. Mientras que una matriz solo puede contener datos del mismo tipo en todas sus celdas, un data frame permite que diferentes columnas tengan distintos tipos de datos, como numéricos, caracteres o lógicos. Esto hace que los data frames sean ideales para análisis estadísticos y manipulación de datos donde se necesitan múltiples tipos de variables, en contraste con las matrices, que son más adecuadas para operaciones matemáticas homogéneas.</p>
<section id="creación-de-un-dataframe." class="level3">
<h3 class="anchored" data-anchor-id="creación-de-un-dataframe.">1.1. Creación de un dataframe.</h3>
<p>Los dataframe pueden crearse de diferentes formas.</p>
<p>La primera de ella es a partir de un número de vactores de igual longitud</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>n<span class="ot">&lt;-</span><span class="dv">10</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Varón"</span>, <span class="st">"Mujer"</span>), <span class="at">size =</span> n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Sí"</span>, <span class="st">"No"</span>), <span class="at">size =</span> n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">102</span><span class="sc">:</span><span class="dv">162</span>, <span class="at">size =</span> n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">60</span><span class="sc">:</span><span class="dv">96</span>, <span class="at">size =</span> n, <span class="at">replace =</span> <span class="cn">TRUE</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora construimos el dataframe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(v1, v2, v3, v4)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      v1 v2  v3 v4
1  Varón No 160 67
2  Mujer Sí 128 64
3  Mujer No 159 63
4  Mujer No 116 91
5  Mujer No 127 78
6  Varón No 162 88
7  Mujer Sí 117 73
8  Mujer No 104 92
9  Varón Sí 142 76
10 Mujer Sí 119 74</code></pre>
</div>
</div>
<p>Se pueden etiquetar las columnas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Sexo =</span> v1, <span class="at">Fumador =</span> v2, <span class="at">TAS =</span> v3, <span class="at">TAD =</span> v4)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD
1  Varón      No 160  67
2  Mujer      Sí 128  64
3  Mujer      No 159  63
4  Mujer      No 116  91
5  Mujer      No 127  78
6  Varón      No 162  88
7  Mujer      Sí 117  73
8  Mujer      No 104  92
9  Varón      Sí 142  76
10 Mujer      Sí 119  74</code></pre>
</div>
</div>
<p>La misma acción podría hacerse con la función <code>colnames</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Sexo"</span>, <span class="st">"Fumador"</span>, <span class="st">"TAS"</span>, <span class="st">"TAD"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD
1  Varón      No 160  67
2  Mujer      Sí 128  64
3  Mujer      No 159  63
4  Mujer      No 116  91
5  Mujer      No 127  78
6  Varón      No 162  88
7  Mujer      Sí 117  73
8  Mujer      No 104  92
9  Varón      Sí 142  76
10 Mujer      Sí 119  74</code></pre>
</div>
</div>
<p>A este dataframe se le puede añadir una columna</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>DM<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Sí"</span>,<span class="st">"No"</span>,<span class="st">"No"</span>,<span class="st">"Si"</span>,<span class="st">"No"</span>,<span class="st">"No"</span>,<span class="st">"Si"</span>,<span class="st">"No"</span>,<span class="st">"No"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">&lt;-</span> <span class="fu">data.frame</span>(df,DM)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
1  Varón      No 160  67 No
2  Mujer      Sí 128  64 Sí
3  Mujer      No 159  63 No
4  Mujer      No 116  91 No
5  Mujer      No 127  78 Si
6  Varón      No 162  88 No
7  Mujer      Sí 117  73 No
8  Mujer      No 104  92 Si
9  Varón      Sí 142  76 No
10 Mujer      Sí 119  74 No</code></pre>
</div>
</div>
<p>Se conseguiría el mismo resultado con la función <code>cbind</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">&lt;-</span><span class="fu">cbind</span> (df, DM)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
1  Varón      No 160  67 No
2  Mujer      Sí 128  64 Sí
3  Mujer      No 159  63 No
4  Mujer      No 116  91 No
5  Mujer      No 127  78 Si
6  Varón      No 162  88 No
7  Mujer      Sí 117  73 No
8  Mujer      No 104  92 Si
9  Varón      Sí 142  76 No
10 Mujer      Sí 119  74 No</code></pre>
</div>
</div>
<p>También se podría añadir una fila (debe tener las mismas variables) con la función <code>rbind</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>n.file<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Varón"</span>, <span class="st">"No"</span>, <span class="dv">136</span>, <span class="dv">78</span>, <span class="st">"No"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">&lt;-</span> <span class="fu">rbind</span> (df1,n.file)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
1  Varón      No 160  67 No
2  Mujer      Sí 128  64 Sí
3  Mujer      No 159  63 No
4  Mujer      No 116  91 No
5  Mujer      No 127  78 Si
6  Varón      No 162  88 No
7  Mujer      Sí 117  73 No
8  Mujer      No 104  92 Si
9  Varón      Sí 142  76 No
10 Mujer      Sí 119  74 No
11 Varón      No 136  78 No</code></pre>
</div>
</div>
<p>Un dataframe puede obtenerse a partir de otra. Vamos a obtener nuevas datframes a partir de <code>df2</code>´. Imaginemos que queremos obtener <code>df3</code> eliminando las filas 1 a 5. Puede hacerse de varios modos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df3<span class="ot">&lt;-</span> df2[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>), ]                                           </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
6  Varón      No 162  88 No
7  Mujer      Sí 117  73 No
8  Mujer      No 104  92 Si
9  Varón      Sí 142  76 No
10 Mujer      Sí 119  74 No
11 Varón      No 136  78 No</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df3<span class="ot">&lt;-</span> df2[<span class="dv">6</span><span class="sc">:</span><span class="dv">11</span>, ]                                           </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>df3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
6  Varón      No 162  88 No
7  Mujer      Sí 117  73 No
8  Mujer      No 104  92 Si
9  Varón      Sí 142  76 No
10 Mujer      Sí 119  74 No
11 Varón      No 136  78 No</code></pre>
</div>
</div>
<p>También puede crearse un dataframe a partir de otro eliminando columnas. Probemos a obtener <code>df4</code> desde <code>df3</code> eliminando las columnas TAD y DM</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df4<span class="ot">&lt;-</span> df3[ , <span class="sc">-</span><span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>)]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS
6  Varón      No 162
7  Mujer      Sí 117
8  Mujer      No 104
9  Varón      Sí 142
10 Mujer      Sí 119
11 Varón      No 136</code></pre>
</div>
</div>
</section>
<section id="importación-de-un-dataframe" class="level3">
<h3 class="anchored" data-anchor-id="importación-de-un-dataframe">1.2 Importación de un dataframe</h3>
<p>En muchas ocasiones importamos a R bases de datos u hojas de cálculo creados con otras herramientas. Vamos a ver cómo se hacen estas operaciones.</p>
<ul>
<li>Importación de una base de datos CSV (Comma-Separated Values).</li>
</ul>
<p>Se hace con la función <code>read.csv</code></p>
<p>df &lt;- read.csv(“ruta/del/archivo.csv”)</p>
<ul>
<li>Importación desde un archivo de texto (.txt)</li>
</ul>
<p>Se usa la función read.table</p>
<p>df &lt;- read.table(“ruta/del/archivo.txt”, header = TRUE, sep = “\”)</p>
<p>Le estamos diciendo que lea la primera fila como encabezados y que use el separador con la instrucción <code>sep</code></p>
<ul>
<li>Importación desde una hoja de cálculo excel</li>
</ul>
<p>Primero debe instalarse la librería <code>readxl</code></p>
<p>library(readxl) df &lt;- read_excel(“ruta/del/archivo.xlsx”, sheet = 1)</p>
<p>La instrucción sheet permite elegir la hoja que leerá.</p>
<ul>
<li>Importación desde Stata (.dta) y SPSS (.sav)</li>
</ul>
<p>Primero debe instalarse la librería <code>haven</code> (la librería <code>foreign</code> se usaba para versiones más antiguas de Stata y SPSS</p>
<p>library(haven) df &lt;- read_dta(“ruta/del/archivo.dta”)</p>
<p>library(haven) df &lt;- read_sav(“ruta/del/archivo.sav”)</p>
</section>
<section id="operando-con-un-dataframe" class="level3">
<h3 class="anchored" data-anchor-id="operando-con-un-dataframe">1.3 Operando con un dataframe</h3>
<p>Vamos a hacer algunas operaciones básicas con el <code>df2</code></p>
<p>Reordenar el dataframe en función del orden de una variable. Lo haremos con la bas <code>df2</code> y la función <code>order</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#df2&lt;-df2[order(df2$Sexo, -df2$TAS), ]   </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Ordena df2 primero por el sexo en orden creciente y luego por la TAS en orden decreciente</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Da un error porque TAS se convirtió en <code>character</code> cuando usamos la función <code>rbind</code> . Así que debemos cambiar TAS a variable numérica <code>integer</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df2<span class="sc">$</span>TAS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>TAS <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(df2<span class="sc">$</span>TAS)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>df2_sorted <span class="ot">&lt;-</span> df2[<span class="fu">order</span>(df2<span class="sc">$</span>Sexo, <span class="sc">-</span>df2<span class="sc">$</span>TAS), ]</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>df2_sorted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
3  Mujer      No 159  63 No
2  Mujer      Sí 128  64 Sí
5  Mujer      No 127  78 Si
10 Mujer      Sí 119  74 No
7  Mujer      Sí 117  73 No
4  Mujer      No 116  91 No
8  Mujer      No 104  92 Si
6  Varón      No 162  88 No
1  Varón      No 160  67 No
9  Varón      Sí 142  76 No
11 Varón      No 136  78 No</code></pre>
</div>
</div>
<ul>
<li>Seleccionar un subgrupo de casos o variables</li>
</ul>
<p>Ya se mencionó como seleccionar casos y variables para construir un nuevo dataframe a partir de otro antiguo.</p>
<p>Pero hay otra formas de sleeccionar partes de un dataframe. Volvemos a usar <code>df2</code>y la función <code>subset</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
1  Varón      No 160  67 No
2  Mujer      Sí 128  64 Sí
3  Mujer      No 159  63 No
4  Mujer      No 116  91 No
5  Mujer      No 127  78 Si
6  Varón      No 162  88 No
7  Mujer      Sí 117  73 No
8  Mujer      No 104  92 Si
9  Varón      Sí 142  76 No
10 Mujer      Sí 119  74 No
11 Varón      No 136  78 No</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df2_h <span class="ot">&lt;-</span> <span class="fu">subset</span>(df2,  Sexo <span class="sc">==</span> <span class="st">"Varón"</span>) </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Condición: selección de los "Hombres" en la variable "Sexo". </span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>df2_h</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM
1  Varón      No 160  67 No
6  Varón      No 162  88 No
9  Varón      Sí 142  76 No
11 Varón      No 136  78 No</code></pre>
</div>
</div>
<p>La misma función sirve para seleccionar solo algunas variables de un dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df2_h2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(df2_h, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"TAS"</span>,<span class="st">"TAD"</span>))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df2_h2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   TAS TAD
1  160  67
6  162  88
9  142  76
11 136  78</code></pre>
</div>
</div>
<p>En realidad esa función no difiere de la ya explicada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df2_h2 <span class="ot">&lt;-</span> df2_h[, <span class="fu">c</span>(<span class="st">"TAS"</span>, <span class="st">"TAD"</span>)]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>df2_h2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   TAS TAD
1  160  67
6  162  88
9  142  76
11 136  78</code></pre>
</div>
</div>
<ul>
<li>Creación de una nueva variable</li>
</ul>
<p>En el dataframe <code>df2</code> vamos a crear la variable <code>HTA</code> (“Si”/“No”) cuando TAS&gt;=140 o TAD&gt;=90</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>HTA[df2<span class="sc">$</span>TAS <span class="sc">&gt;=</span> <span class="dv">140</span> <span class="sc">|</span> df2<span class="sc">$</span>TAD <span class="sc">&gt;=</span><span class="dv">90</span>] <span class="ot">&lt;-</span> <span class="st">"Sí"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>HTA[df2<span class="sc">$</span>TAS <span class="sc">&lt;</span> <span class="dv">140</span> <span class="sc">&amp;</span> df2<span class="sc">$</span>TAD <span class="sc">&lt;</span><span class="dv">90</span>] <span class="ot">&lt;-</span> <span class="st">"No"</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM HTA
1  Varón      No 160  67 No  Sí
2  Mujer      Sí 128  64 Sí  No
3  Mujer      No 159  63 No  Sí
4  Mujer      No 116  91 No  Sí
5  Mujer      No 127  78 Si  No
6  Varón      No 162  88 No  Sí
7  Mujer      Sí 117  73 No  No
8  Mujer      No 104  92 Si  Sí
9  Varón      Sí 142  76 No  Sí
10 Mujer      Sí 119  74 No  No
11 Varón      No 136  78 No  No</code></pre>
</div>
</div>
<ul>
<li>Recodificación de una variable</li>
</ul>
<p>Se pueden atribuir nuevos valores a una variable por ejemplo para codificarla. A partir de <code>df2</code> añadimos la variable Edad , creando <code>df2_E</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>Edad<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">38</span>,<span class="dv">48</span>,<span class="dv">52</span>,<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">49</span>,<span class="dv">52</span>,<span class="dv">72</span>,<span class="dv">68</span>,<span class="dv">61</span>,<span class="dv">59</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (Edad)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df2_E<span class="ot">&lt;-</span><span class="fu">data.frame</span> (df2, Edad)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span> (df2_E)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   11 obs. of  7 variables:
 $ Sexo   : chr  "Varón" "Mujer" "Mujer" "Mujer" ...
 $ Fumador: chr  "No" "Sí" "No" "No" ...
 $ TAS    : int  160 128 159 116 127 162 117 104 142 119 ...
 $ TAD    : chr  "67" "64" "63" "91" ...
 $ DM     : chr  "No" "Sí" "No" "No" ...
 $ HTA    : chr  "Sí" "No" "Sí" "Sí" ...
 $ Edad   : num  38 48 52 60 70 49 52 72 68 61 ...</code></pre>
</div>
</div>
<p>Vamos a categorizar la Edad en tres categorías usando los puntos de corte de 50 y 65 años</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (df2_E<span class="sc">$</span>Edad)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df2_E<span class="sc">$</span>Edad[df2_E<span class="sc">$</span>Edad <span class="sc">&gt;</span> <span class="dv">64</span>] <span class="ot">&lt;-</span> <span class="st">"65 y más años"</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>df2_E<span class="sc">$</span>Edad[df2_E<span class="sc">$</span>Edad <span class="sc">&gt;</span> <span class="dv">50</span> <span class="sc">&amp;</span> df2_E<span class="sc">$</span>Edad <span class="sc">&lt;</span> <span class="dv">65</span>] <span class="ot">&lt;-</span> <span class="st">"Entre 50 y 64 años"</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>df2_E<span class="sc">$</span>Edad[df2_E<span class="sc">$</span>Edad <span class="sc">&lt;</span><span class="dv">50</span>] <span class="ot">&lt;-</span> <span class="st">"Menor de 50 años"</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Se podría hacer también con la función `cut`</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#df2_E$Edad &lt;- cut(df2_E$Edad, breaks = c(-Inf, 50, 65, Inf), #</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar etiquetas a los intervalos</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co">#labels = c("Menor de 50 años", "Entre 50 y 64 años", "65 y más años"))</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>df2_E</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Fumador TAS TAD DM HTA               Edad
1  Varón      No 160  67 No  Sí   Menor de 50 años
2  Mujer      Sí 128  64 Sí  No   Menor de 50 años
3  Mujer      No 159  63 No  Sí Entre 50 y 64 años
4  Mujer      No 116  91 No  Sí Entre 50 y 64 años
5  Mujer      No 127  78 Si  No      65 y más años
6  Varón      No 162  88 No  Sí   Menor de 50 años
7  Mujer      Sí 117  73 No  No Entre 50 y 64 años
8  Mujer      No 104  92 Si  Sí      65 y más años
9  Varón      Sí 142  76 No  Sí      65 y más años
10 Mujer      Sí 119  74 No  No Entre 50 y 64 años
11 Varón      No 136  78 No  No Entre 50 y 64 años</code></pre>
</div>
</div>
<p>Finalmente, vamos a cambiar el nombre a una variable de <code>df2_E</code> . Vamos a cambiar el nombre de la variable Tabaco por Fumador.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df2_E)[<span class="fu">names</span>(df2_E) <span class="sc">==</span> <span class="st">"Fumador"</span>] <span class="ot">&lt;-</span> <span class="st">"Tabaco"</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>df2_E</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sexo Tabaco TAS TAD DM HTA               Edad
1  Varón     No 160  67 No  Sí   Menor de 50 años
2  Mujer     Sí 128  64 Sí  No   Menor de 50 años
3  Mujer     No 159  63 No  Sí Entre 50 y 64 años
4  Mujer     No 116  91 No  Sí Entre 50 y 64 años
5  Mujer     No 127  78 Si  No      65 y más años
6  Varón     No 162  88 No  Sí   Menor de 50 años
7  Mujer     Sí 117  73 No  No Entre 50 y 64 años
8  Mujer     No 104  92 Si  Sí      65 y más años
9  Varón     Sí 142  76 No  Sí      65 y más años
10 Mujer     Sí 119  74 No  No Entre 50 y 64 años
11 Varón     No 136  78 No  No Entre 50 y 64 años</code></pre>
</div>
</div>
<p>En la siguiente tabla resumimos algunas de las funciones utilizadas en el dataframe y otras básicas para un dataframe genérico df</p>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 40%">
<col style="width: 18%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th>Función</th>
<th>Descripción</th>
<th>Ejemplo</th>
<th>Resultado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>head</td>
<td>Muestra las primeras filas del dataframe</td>
<td>head(df)</td>
<td>Primeras 6 filas del dataframe df</td>
</tr>
<tr class="even">
<td>tail</td>
<td>Muestra las últimas filas del dataframe</td>
<td>tail(df)</td>
<td>Últimas 6 filas del dataframe df</td>
</tr>
<tr class="odd">
<td>nrow</td>
<td>Devuelve el número de filas del dataframe</td>
<td>nrow(df)</td>
<td>Número total de filas en df</td>
</tr>
<tr class="even">
<td>ncol</td>
<td>Devuelve el número de columnas del dataframe</td>
<td>ncol(df)</td>
<td>Número total de columnas en df</td>
</tr>
<tr class="odd">
<td>dim</td>
<td>Devuelve un vector con el número de filas y columnas</td>
<td>dim(df)</td>
<td>Dimensiones del dataframe (filas, columnas)</td>
</tr>
<tr class="even">
<td>summary</td>
<td>Muestra un resumen estadístico de cada columna del dataframe</td>
<td>summary(df)</td>
<td>Resumen estadístico de las columnas de df</td>
</tr>
<tr class="odd">
<td>str</td>
<td>Muestra la estructura interna del dataframe</td>
<td>str(df)</td>
<td>Estructura y tipo de datos en df</td>
</tr>
<tr class="even">
<td>colnames</td>
<td>Devuelve o establece los nombres de las columnas</td>
<td>colnames(df)</td>
<td>Nombres de las columnas de df</td>
</tr>
<tr class="odd">
<td>rownames</td>
<td>Devuelve o establece los nombres de las filas</td>
<td>rownames(df)</td>
<td>Nombres de las filas de df</td>
</tr>
<tr class="even">
<td>subset</td>
<td>Extrae subconjuntos del dataframe basados en condiciones</td>
<td>subset(df, column &gt; value)</td>
<td>Subconjunto de df donde column &gt; value</td>
</tr>
<tr class="odd">
<td>df[column]</td>
<td>Selecciona una columna específica del dataframe</td>
<td>df$column</td>
<td>Vector con los datos de column</td>
</tr>
<tr class="even">
<td>df[row, col]</td>
<td>Selecciona un elemento o subconjunto específico del dataframe</td>
<td>df[1, 2]</td>
<td>Elemento en la primera fila y segunda columna</td>
</tr>
<tr class="odd">
<td>df[, col]</td>
<td>Selecciona todas las filas para una columna específica</td>
<td>df[, 2]</td>
<td>Todos los datos de la segunda columna</td>
</tr>
<tr class="even">
<td>df[row, ]</td>
<td>Selecciona todas las columnas para una fila específica</td>
<td>df[1, ]</td>
<td>Todos los datos de la primera fila</td>
</tr>
<tr class="odd">
<td>apply</td>
<td>Aplica una función a lo largo de las filas o columnas</td>
<td>apply(df, 2, mean)</td>
<td>Media de cada columna de df</td>
</tr>
<tr class="even">
<td>rbind</td>
<td>Añade filas al dataframe</td>
<td>rbind(df, new_row)</td>
<td>Nuevo dataframe con new_row añadido</td>
</tr>
<tr class="odd">
<td>cbind</td>
<td>Añade columnas al dataframe</td>
<td>cbind(df, new_column)</td>
<td>Nuevo dataframe con new_column añadido</td>
</tr>
<tr class="even">
<td>merge</td>
<td>Combina dos dataframes basados en una clave común</td>
<td>merge(df1, df2, by = “key”)</td>
<td>Dataframe combinado de df1 y df2</td>
</tr>
<tr class="odd">
<td>order</td>
<td>Ordena un dataframe según una o más columnas</td>
<td>df[order(df$column), ]</td>
<td>Dataframe df ordenado por column</td>
</tr>
<tr class="even">
<td>na.omit</td>
<td>Elimina filas con valores NA del dataframe</td>
<td>na.omit(df)</td>
<td>Dataframe df sin filas con valores NA</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="array" class="level2">
<h2 class="anchored" data-anchor-id="array">2. Array</h2>
<p>Un array en R es una estructura de datos multi-dimensional que permite almacenar y manipular datos en más de dos dimensiones, extendiendo así las capacidades de los vectores y matrices.</p>
<p>Los arrays son útiles cuando se necesita trabajar con datos que tienen más de dos dimensiones, como por ejemplo en análisis de series temporales, datos espaciales, o cualquier situación en la que se manejen múltiples capas de datos relacionados entre sí.</p>
<p>Vamos a ver un ejemplo de creación de un array en el que archivamos las temperaturas diarias en tres ciudades distintas, tomadas en dos momentos del día</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Temperaturas diarias para 3 ciudades durante 7 días</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Cada ciudad tiene 2 temperaturas al día (mañana y tarde)</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>temperaturas <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ciudad 1: (mañana, tarde para 7 días)</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">20</span>, <span class="dv">25</span>,  <span class="co"># Día 1</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">22</span>, <span class="dv">27</span>,  <span class="co"># Día 2</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">24</span>, <span class="dv">29</span>,  <span class="co"># Día 3</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">26</span>, <span class="dv">31</span>,  <span class="co"># Día 4</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">28</span>, <span class="dv">33</span>,  <span class="co"># Día 5</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="dv">35</span>,  <span class="co"># Día 6</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">32</span>, <span class="dv">37</span>,  <span class="co"># Día 7</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ciudad 2: (mañana, tarde para 7 días)</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">18</span>, <span class="dv">23</span>,  <span class="co"># Día 1</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">19</span>, <span class="dv">24</span>,  <span class="co"># Día 2</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">21</span>, <span class="dv">26</span>,  <span class="co"># Día 3</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">22</span>, <span class="dv">27</span>,  <span class="co"># Día 4</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">24</span>, <span class="dv">29</span>,  <span class="co"># Día 5</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">25</span>, <span class="dv">30</span>,  <span class="co"># Día 6</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">27</span>, <span class="dv">32</span>,  <span class="co"># Día 7</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ciudad 3: (mañana, tarde para 7 días)</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">28</span>, <span class="dv">33</span>,  <span class="co"># Día 1</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">29</span>, <span class="dv">34</span>,  <span class="co"># Día 2</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="dv">35</span>,  <span class="co"># Día 3</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">32</span>, <span class="dv">37</span>,  <span class="co"># Día 4</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">33</span>, <span class="dv">38</span>,  <span class="co"># Día 5</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">35</span>, <span class="dv">40</span>,  <span class="co"># Día 6</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">37</span>, <span class="dv">41</span>   <span class="co"># Día 7</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el array</span></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensiones: 7 días, 3 ciudades, 2 períodos del día (mañana y tarde)</span></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>temp_array <span class="ot">&lt;-</span> <span class="fu">array</span>(temperaturas, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">2</span>))</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar nombres a las dimensiones para mayor claridad</span></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(temp_array) <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>  Días <span class="ot">=</span> <span class="fu">paste</span>(<span class="st">"Días"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>),        <span class="co"># Nombres para los días</span></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">Ciudad =</span> <span class="fu">paste</span>(<span class="st">"Ciudad"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),     <span class="co"># Nombres para las ciudades</span></span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">Periodo =</span> <span class="fu">c</span>(<span class="st">"Mañana"</span>, <span class="st">"Tarde"</span>) )</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar el array</span></span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(temp_array)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , Periodo = Mañana

        Ciudad
Días    Ciudad 1 Ciudad 2 Ciudad 3
  Días 1       20       31       18
  Días 2       25       28       23
  Días 3       22       33       19
  Días 4       27       30       24
  Días 5       24       35       21
  Días 6       29       32       26
  Días 7       26       37       22

, , Periodo = Tarde

        Ciudad
Días    Ciudad 1 Ciudad 2 Ciudad 3
  Días 1       27       28       37
  Días 2       24       33       33
  Días 3       29       29       38
  Días 4       25       34       35
  Días 5       30       30       40
  Días 6       27       35       37
  Días 7       32       32       41</code></pre>
</div>
</div>
</section>
<section id="lista" class="level2">
<h2 class="anchored" data-anchor-id="lista">3. Lista</h2>
<p>Una lista es una estructura de datos muy flexible y versátil que permite almacenar elementos de diferentes tipos y tamaños. A diferencia de los vectores y matrices, que requieren que todos sus elementos sean del mismo tipo, las listas pueden contener elementos de tipos variados, incluyendo números, cadenas de texto, vectores, matrices, dataframes e incluso otras listas.</p>
<p>Las listas permiten realizar manipulaciones de datos complejas. Puedes acceder a cada componente de una lista de forma individual y realizar operaciones específicas sobre ellos.</p>
<p>Algunas funciones en R, especialmente en paquetes de análisis y modelado, devuelven resultados en forma de listas. Estas listas pueden contener múltiples componentes, como coeficientes del modelo, estadísticas, gráficos y otros resultados.</p>
<p>Veamos un ejemplo básico de creación de una lista y a mostrar el resultado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Nombres =</span> <span class="fu">c</span>(<span class="st">"Carlos"</span>, <span class="st">"Ana"</span>), <span class="co"># Vector con nombres de los sujetos</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Edades =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>),           <span class="co"># Vector con edades de los sujetos</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Calificaciones =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">92</span>, <span class="dv">75</span>), <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">85</span>, <span class="dv">80</span>))  <span class="co"># Lista con vectores de calificaciones</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la lista</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lista)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nombres
[1] "Carlos" "Ana"   

$Edades
[1] 25 30

$Calificaciones
$Calificaciones[[1]]
[1] 88 92 75

$Calificaciones[[2]]
[1] 90 85 80</code></pre>
</div>
</div>
</section>
<section id="ejercicios-con-un-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="ejercicios-con-un-dataframe"><strong>4. Ejercicios con un dataframe</strong></h2>
<p>Vamos a recuperar el dataframe df_prueba (es un archivo.csv) en tu directorio y el encabezamiento de sus variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>df_prueba <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"C:/Users/jesus.martin/OneDrive - Universidad Rey Juan Carlos/Escritorio/Prácticas/df_prueba.csv"</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Ten en cuenta que debe revisarse el "pathway" del directorio</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_prueba)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora etiqueta la variable sex (0= Mujer; 1 = varón), y fum e iam (0=No; 1=Sí), pero nombra de otra forma las variables etiquetadas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Etiquetar las variables</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>sex_label <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df_prueba<span class="sc">$</span>sex <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Mujer"</span>, <span class="st">"Varón"</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>fum_label <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df_prueba<span class="sc">$</span>fum <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"No"</span>, <span class="st">"Sí"</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>iam_label <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df_prueba<span class="sc">$</span>iam <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"No"</span>, <span class="st">"Sí"</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar las primeras filas del dataframe con las nuevas etiquetas</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_prueba)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co">#ver la estructura del fataframe</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span> (df_prueba)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ves alguna diferencia entre ¿fum y fum label?</p>
<p>Borra las variables etiquetadas y, ahora crea una variable factor y luego la etiquetas, puedes hacerlo sobre la misma variable</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Las variables etiquetadas en el ejemplo anterior (sex_label,...) son variables caracter y no se puede operar con ellas. Las borramos</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminar las columnas "sex_label", "fum_label" "iam_label"</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>fum_label <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>sex_label <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>iam_label <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificar que las columnas han sido eliminadas</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_prueba)</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir variables a factor con etiquetas</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(df_prueba<span class="sc">$</span>sex, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Mujer"</span>, <span class="st">"Varón"</span>))</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>fum <span class="ot">&lt;-</span> <span class="fu">factor</span>(df_prueba<span class="sc">$</span>fum, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Sí"</span>))</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>iam <span class="ot">&lt;-</span> <span class="fu">factor</span>(df_prueba<span class="sc">$</span>iam, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Sí"</span>))</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar las primeras filas del dataframe con los factores etiquetados</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_prueba)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Crea una nueva variable, IMC y recategorizala en los grupos “bajo” si IMC &lt;20, “normal” si 20&lt;=IMC&lt;30 y “obesidad” si 30&lt;=IMC</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>IMC <span class="ot">&lt;-</span> df_prueba<span class="sc">$</span>peso <span class="sc">/</span> (df_prueba<span class="sc">$</span>alt <span class="sc">/</span> <span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>IMC <span class="ot">&lt;-</span> <span class="fu">round</span>(df_prueba<span class="sc">$</span>IMC, <span class="dv">2</span>) <span class="co">#redondeamos a 2 decimales</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>df_prueba<span class="sc">$</span>IMC_r <span class="ot">&lt;-</span> <span class="fu">cut</span>(df_prueba<span class="sc">$</span>IMC,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="cn">Inf</span>),</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Bajo"</span>, <span class="st">"Normal"</span>, <span class="st">"Obesidad"</span>))</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co">#En esta orden los valores no son incluidos en la categoría inferior. </span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Si quisiesemos que sí se incluyesen el código debería escribirse así</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="co">#df_prueba$IMC_r &lt;- cut(df_prueba$imc, breaks = c(-Inf, 20, 30, Inf/),labels = c("Bajo", "Normal", "Obesidad"),right = FALSE)</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificamos la nueva columna</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_prueba<span class="sc">$</span>IMC_r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Qué información tienes de las variables continuas? ¿y de las variables factor?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumen de las variables cuantitativas</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_prueba[, <span class="fu">c</span>(<span class="st">"edad"</span>, <span class="st">"alt"</span>, <span class="st">"peso"</span>, <span class="st">"colesterol"</span>, <span class="st">"IMC"</span>)])</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumen de las variables categóricas (factores)</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_prueba[, <span class="fu">c</span>(<span class="st">"sex"</span>, <span class="st">"fum"</span>, <span class="st">"iam"</span>, <span class="st">"IMC_r"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Haz un descriptivo de la variable “colesterol” en hombres y en mujeres y de la variable “iam” en hombres y en mujeres</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_prueba<span class="sc">$</span>colesterol[df_prueba<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"Mujer"</span>])</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_prueba<span class="sc">$</span>colesterol[df_prueba<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"Varón"</span>])</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_prueba<span class="sc">$</span>iam[df_prueba<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"Mujer"</span>])</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_prueba<span class="sc">$</span>iam[df_prueba<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"Varón"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Realiza un histograma de la variable “altura” y un box plot de la variable ““colesterol”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histograma de la altura</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df_prueba<span class="sc">$</span>alt, <span class="at">main =</span> <span class="st">"Histograma de Altura"</span>, <span class="at">xlab =</span> <span class="st">"Altura (cm)"</span>, <span class="at">col =</span> <span class="st">"lightblue"</span>, <span class="at">border =</span> <span class="st">"black"</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot del colesterol</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(df_prueba<span class="sc">$</span>colesterol, <span class="at">main =</span> <span class="st">"Boxplot de Colesterol"</span>, <span class="at">ylab =</span> <span class="st">"Colesterol"</span>, <span class="at">col =</span> <span class="st">"lightgreen"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Crea un gráfico que correlacione “peso” y “altura”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico de dispersión</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_prueba<span class="sc">$</span>alt, df_prueba<span class="sc">$</span>peso,</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Relación entre Altura y Peso"</span>,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Altura (cm)"</span>,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Peso (kg)"</span>,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="co"># Tipo de punto</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"lightblue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finalmente, selecciona en el df_prueba a los sujetos varones con colesterol &gt;200 y que cuya variable iam=“SÍ”, comprueba cuantos sujetos son y guarda el nuevo data frame como un fichero .csv. ¿En qué carpeta guardará el fichero si no especificas nada?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>df_prueba2 <span class="ot">&lt;-</span> df_prueba[df_prueba<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"Varón"</span> <span class="sc">&amp;</span> df_prueba<span class="sc">$</span>colesterol <span class="sc">&gt;</span> <span class="dv">200</span> <span class="sc">&amp;</span> df_prueba<span class="sc">$</span>iam <span class="sc">==</span> <span class="st">"Sí"</span>, ]</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>df_prueba2</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df_prueba2, <span class="at">file =</span> <span class="st">"df_prueba2.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>